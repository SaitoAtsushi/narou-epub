# narou-epub
小説ホスティングサイト[小説家になろう](https://syosetu.com/)の連載・短編作品を EPUB3 形式に変換するコマンドラインツールです。

## インストール
[リリース版](https://github.com/SaitoAtsushi/narou-epub/releases/)のアーカイブを展開して実行ファイル (narou-epub.exe) を適当なところに置くだけです。
必要なのは実行ファイルひとつだけなのでどこに置いてもかまいません。

### ソースコードからインストール
Rust のツールチェインや git などがインストール済みであれば
```sh
git clone https://github.com/SaitoAtsushi/narou-epub.git
cd narou-epub
cargo install --path .
```
といったようにすることもできます。

## 使い方
コマンドラインから
```sh
narou-epub [OPTION] NCODE ...
```
といった形で入力するとカレントディレクトリに
```
[作者名] 表題.epub
```
の形式のファイル名で EPUB ファイルが作られます。

オプションとしては以下が使えます。

|短縮オプション|ロングオプション|効果                                  |
|--------------|----------------|--------------------------------------|
|-h            |--help          |コマンドラインの説明を表示            |
|-V            |--version       |ツールのバージョンの表示              |
|              |--horizontal    |生成する EPUB を横書きにする          |
|-w <秒>       |--wait <秒>     |アクセスごとに指定秒の待機時間をいれる|

## 設計思想

### 設定
設定ファイルを持たず、コマンドラインオプションでわずかに制御できる項目があるだけです。
カスタマイズしたいことがあれば fork してプログラムを修正してください。

### キャッシュ
インターネット経由で取得したデータはキャッシュしません。
コマンドを実行するたびに全て取得しなおします。
ネットワーク越しにあるデータとローカルのデータを完全に一致するように管理するのは困難であり、同期のための API もないので諦めています。
不完全でもキャッシュしたいという場合はキャッシュ機能付きのプロキシサーバをローカルにたてることをお勧めします。

### 規格
生成されるデータは EPUB3 の規格に沿うことを指向していますが全ての場合で完全である自信はないです。
また、 EPUB 閲覧用のソフト (リーダ) のほうが完全に規格に沿っているとは限らず、相性によっては読めなかったりレイアウトが崩れたりするかもしれません。

特に EPUB2 との互換性を積極的に無視する設計なので生成した EPUB ファイルは古いリーダでは読み取れない可能性が高いです。
[Calibre](https://calibre-ebook.com/) などのソフトで EPUB2 やその他の形式に変換することも可能なので組合わせて使うのも良いかもしれません。

## 開発者向け情報
Windows 環境で開発しており、 Windows 用のバイナリ (実行ファイル) のみを提供します。
しかし依存しているクレートはおおよそマルチプラットフォーム対応なので Linux などの主要な環境に移植するのは容易と思われます。
